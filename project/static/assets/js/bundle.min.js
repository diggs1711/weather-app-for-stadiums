!function(e){function t(i){if(r[i])return r[i].exports;var n=r[i]={exports:{},id:i,loaded:!1};return e[i].call(n.exports,n,n.exports,t),n.loaded=!0,n.exports}var r={};t.m=e,t.c=r,t.p="",t(0)}([function(e,t,r){!function(){"use strict";var e=r(1),t=r(2),i=r(3),n={pubSub:e,stadiums:t,stadiumList:null,loadingEle:null,inputSearchString:null,searchString:"",map:i,markers:[],run:function(){this.init(),this.stadiums.fetchStadiums()},init:function(){this.initEle(),this.initEvents(),this.map.init()},initEle:function(){this.stadiumList=document.querySelector(".stadium-list"),this.loadingEle=document.querySelector(".loading"),this.inputSearchString=document.querySelector(".searchString")},initEvents:function(){var e=this;this.inputSearchString.addEventListener("keyup",e.filterCities.bind(e))},filterCities:function(){this.searchString=this.inputSearchString.value;var t=this,r=this.map.markers.filter(function(e){var r=e.I.name;if(r)var i=r.toLowerCase().indexOf(t.searchString.toLowerCase())>-1;return i||null});e.publish("inputSearch",r)},render:function(e){var t=this,r=e.stadiums;this.loadingEle.classList.add("hidden"),r.map(function(e){var r=t.createWeatherInfoElement(e);t.stadium,t.stadiumList.appendChild(r)}),this.addMarkersToMap()},createWeatherInfoElement:function(e){var t=document.createElement("tr");for(var r in e)if(e.hasOwnProperty(r)&&"longitude"!==r&&"latitude"!==r){var i=document.createElement("td");i.innerText=e[r],t.appendChild(i)}return this.addMarker(e.longitude,e.latitude,e.city),t},addMarker:function(t,r,i){e.publish("addMarker",[t,r,i])},addMarkersToMap:function(){e.publish("addMarkersToMap","")},loadingElement:function(){this.loadingEle.classList.remove("hidden")}};e.subscribe("stadiumsLoaded",n.render,n),e.subscribe("addMarkersToMap",i.addMarkersToMap,i),e.subscribe("loadingStadiums",n.loadingElement,n),e.subscribe("addMarker",i.addMarker,i),e.subscribe("inputSearch",i.filterMap,i),n.run()}()},function(e,t){!function(){"use strict";var t={events:[],publish:function(e,t){this.events.map(function(r){r.eve===e&&r.fn.call(r.scope,t)})},subscribe:function(e,t,r){this.events.push({eve:e,fn:t,scope:r})}};e.exports=t}()},function(e,t,r){!function(){"use strict";var t=r(1),i={pubSub:t,init:function(){},stadiums:{},getStadiums:function(){return this.stadiums},fetchStadiums:function(){t.publish("loadingStadiums",""),$.ajax({url:"stadiums.json",dataType:"json",success:function(e){i=e,t.publish("stadiumsLoaded",e)}.bind(this),error:function(e,t,r){console.log("An error ("+t+") occured:",r.toString())}.bind(this)})}};e.exports=i}()},function(e,t){!function(){"use strict";var t={markers:[],vectorLayer:null,mapLayer:null,osmLayer:null,emptyLayer:null,filteredMarkers:[],init:function(){this.initElements(),this.initMapLayers()},initElements:function(){this.mapLayer=new ol.Map({target:"map",layers:[],view:new ol.View({center:ol.proj.fromLonLat([2.3522,48.8566]),zoom:4})}),this.emptyLayer=new ol.layer.Vector({source:new ol.source.Vector({features:[]})})},initMapLayers:function(){this.initLayerOSM(),this.mapLayer.addLayer(this.osmLayer)},initLayerOSM:function(){this.osmLayer=new ol.layer.Tile({source:new ol.source.OSM})},addMarker:function(e){var t=e[1],r=e[0],i=e[2],n=new ol.Feature({type:"icon",name:i,geometry:new ol.geom.Point(ol.proj.transform([r,t],"EPSG:4326","EPSG:3857"))});this.markers.push(n)},addMarkersToMap:function(){var e=this;this.vectorLayer=new ol.layer.Vector({source:new ol.source.Vector({features:this.markers}),style:function(t){return e.styles[t.get("type")]}}),this.mapLayer.addLayer(this.vectorLayer)},filterMap:function(e){this.filteredMarkers=e,this.clearLayer(),this.addFilteredMarkers()},addFilteredMarkers:function(){this.vectorLayer.getSource().addFeatures(this.filteredMarkers),this.mapLayer.render(),this.mapLayer.updateSize()},clearLayer:function(){this.vectorLayer.getSource().clear()},styles:{route:new ol.style.Style({stroke:new ol.style.Stroke({width:6,color:[237,212,0,.8]})}),icon:new ol.style.Style({image:new ol.style.Icon({anchor:[.5,1],src:"https://openlayers.org/en/v4.0.1/examples/data/icon.png"})}),geoMarker:new ol.style.Style({image:new ol.style.Circle({radius:7,snapToPixel:!1,fill:new ol.style.Fill({color:"black"}),stroke:new ol.style.Stroke({color:"white",width:2})})})},markerFactory:function(e){e.forEach(function(e){new ol.Feature({type:"icon",geometry:new ol.geom.Point(ol.proj.transform([-9,53],"EPSG:4326","EPSG:3857"))})})}};e.exports=t}()}]);