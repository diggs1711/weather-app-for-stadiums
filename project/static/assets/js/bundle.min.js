!function(e){function t(i){if(n[i])return n[i].exports;var r=n[i]={exports:{},id:i,loaded:!1};return e[i].call(r.exports,r,r.exports,t),r.loaded=!0,r.exports}var n={};t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){!function(){"use strict";var e=n(1),t=n(2),i=n(3),r=n(5),a={pubSub:e,stadiums:t,inputSearchString:null,searchString:"",map:i,markers:[],run:function(){this.init(),this.stadiums.fetchStadiums()},init:function(){this.initEle(),this.initEvents(),this.map.init()},initEle:function(){this.inputSearchString=document.querySelector(".searchString")},initEvents:function(){var e=this;this.inputSearchString.addEventListener("keyup",e.filterCities.bind(e))},filterCities:function(){this.searchString=this.inputSearchString.value;var t=this,n=this.map.markers.filter(function(e){var n=e.I.name;if(n)var i=n.toLowerCase().indexOf(t.searchString.toLowerCase())>-1;return i||null});e.publish("inputSearch",n)}};e.subscribe("stadiumsLoaded",r.render,r),e.subscribe("addMarkersToMap",i.addMarkersToMap,i),e.subscribe("addMarker",i.addMarker,i),e.subscribe("inputSearch",i.filterMap,i),e.subscribe("loadingComplete",i.showMap,i),a.run()}()},function(e,t){!function(){"use strict";var t={events:[],publish:function(e,t){this.events.map(function(n){n.eve===e&&n.fn.call(n.scope,t)})},subscribe:function(e,t,n){this.events.push({eve:e,fn:t,scope:n})}};e.exports=t}()},function(e,t,n){!function(){"use strict";var t=n(1),i={pubSub:t,init:function(){},stadiums:{},getStadiums:function(){return this.stadiums},fetchStadiums:function(){t.publish("loadingStadiums",""),$.ajax({url:"stadiums.json",dataType:"json",success:function(e){i=e,t.publish("stadiumsLoaded",e)}.bind(this),error:function(e,t,n){console.log("An error ("+t+") occured:",n.toString())}.bind(this)})}};e.exports=i}()},function(e,t,n){!function(){"use strict";var t=n(4),i=n(1),r=new t,a={markers:[],vectorLayer:null,mapLayer:null,osmLayer:null,emptyLayer:null,cloudLayer:null,filteredMarkers:[],ele:null,loadingEle:null,cloudBtn:null,controls:null,selectedLayer:"",init:function(){this.initElements(),this.initMapLayers(),this.initEvents()},initElements:function(){this.map=document.querySelector(".map"),this.loadingEle=document.querySelector(".loadingIcon"),this.cloudBtn=document.querySelector(".cloudBtn"),this.controls=document.querySelector(".controls"),this.mapLayer=new ol.Map({interactions:ol.interaction.defaults({mouseWheelZoom:!1}),target:"map",layers:[],view:new ol.View({center:ol.proj.fromLonLat([.8,52.2]),zoom:6})}),this.emptyLayer=new ol.layer.Vector({source:new ol.source.Vector({features:[]})})},initEvents:function(){var e=this;this.cloudBtn.addEventListener("click",e.cloudLayerControl.bind(e))},initMapLayers:function(){this.initLayerOSM(),this.mapLayer.addLayer(this.osmLayer)},initLayerOSM:function(){this.osmLayer=new ol.layer.Tile({source:new ol.source.OSM})},initCloudLayers:function(){this.cloudLayer=new ol.layer.Tile({title:"Clouds",source:new ol.source.XYZ({url:"http://maps.owm.io:8099/58e4198ae158e70001eb97f9/{z}/{x}/{y}?hash=1801cf76b88ae491674d97d8cae66107"})})},cloudLayerControl:function(){"cloud"===this.selectedLayer?(this.mapLayer.removeLayer(this.cloudLayer),this.selectedLayer=""):(this.selectedLayer="cloud",this.initCloudLayers(),this.mapLayer.addLayer(this.cloudLayer),this.mapLayer.updateSize())},addMarker:function(e){var t=e[1],n=e[0],i=e[2],a=e[3],s=new ol.Feature({team:a,name:i,geometry:new ol.geom.Point(ol.proj.transform([n,t],"EPSG:4326","EPSG:3857"))});console.log(r),r.createLogo(t,n,a.trim()),this.markers.push(s)},addMarkersToMap:function(){this.vectorLayer=new ol.layer.Vector({source:new ol.source.Vector({features:this.markers}),style:function(e){var t=e.get("team").toString().trim();return console.log(r.logos[t]),r.logos[t]}}),this.mapLayer.addLayer(this.vectorLayer),i.publish("loadingComplete","")},filterMap:function(e){this.filteredMarkers=e,this.clearLayer(),this.addFilteredMarkers()},showMap:function(){console.log("Loading Complete"),this.loadingEle.classList.add("hidden"),this.map.classList.remove("hidden"),this.controls.classList.remove("hidden"),this.map.style.height="350px",this.mapLayer.updateSize()},addFilteredMarkers:function(){this.vectorLayer.getSource().addFeatures(this.filteredMarkers),this.mapLayer.render(),this.mapLayer.updateSize()},clearLayer:function(){this.vectorLayer.getSource().clear()},styles:{route:new ol.style.Style({stroke:new ol.style.Stroke({width:6,color:[237,212,0,.8]})}),icon:new ol.style.Style({image:new ol.style.Icon({anchor:[.5,1],size:[300,300],scale:.07,src:"../static/images/Leeds_United_Logo.png"})}),geoMarker:new ol.style.Style({image:new ol.style.Circle({radius:7,snapToPixel:!1,fill:new ol.style.Fill({color:"black"}),stroke:new ol.style.Stroke({color:"white",width:2})})})},markerFactory:function(e){e.forEach(function(e){new ol.Feature({type:"icon",geometry:new ol.geom.Point(ol.proj.transform([-9,53],"EPSG:4326","EPSG:3857"))})})}};e.exports=a}()},function(e,t){!function(){var t=function(){this.logos={}};t.prototype.createLogo=function(e,t,n){this.logos[n]=new ol.style.Style({image:new ol.style.Icon({anchor:[.5,1],size:[1e3,1e3],scale:.021,src:"../static/images/"+n+".png"})})},t.prototype.init=function(){},e.exports=t}()},function(e,t,n){!function(){var t=n(1),i=n(6),r=new i,a={stadiumList:null,init:function(){this.initElements()},initElements:function(){this.stadiumList=document.querySelector(".stadium-list")},createWeatherInfoElement:function(e){var t=document.createElement("li");t.className="list-group-item text-center";var n=document.createElement("p");n.className="h3 text-center";var i=document.createElement("p");i.className="h1 text-center";var r=document.createElement("p"),a=document.createElement("div");for(var s in e){var o=document.createElement("span");if(e.hasOwnProperty(s)){if("longitude"!==String(s)&&"latitude"!==String(s)){if("team"===String(s)&&(o.innerText=e[s],n.appendChild(o)),"temp"===String(s)){console.log(e.code);var l=document.createElement("canvas"),c=e.icon+" icon-style";l.className=c,o.className="pull-left col-md-5 temp",o.innerText=e[s]+"Â°",o.appendChild(l),i.appendChild(o)}"wind_speed"===String(s)&&(o.className="pull-right col-md-5 wind-speed",o.innerText=e[s]+"m/s",i.appendChild(o)),"status"===String(s)&&(r.innerText=e[s])}var u="url('../static/images/"+String(e.team).trim()+".png')";a.style.backgroundImage=u,a.className="thumbnail"}}return i.appendChild(a),t.appendChild(n),t.appendChild(i),t.appendChild(r),this.addMarker(e.longitude,e.latitude,e.city,e.team),t},addWeatherIcon:function(e){var t=e,n=i[t].icon;return t>699&&t<800||t>899&&t<1e3||(n="day-"+n),"wi wi-"+n+" col-md-12"},addWindLabel:function(e){var t=document.createElement("span");return e<=5?(t.innerText="Calm",t.className="label label-info"):e>5&&e<=15?(t.innerText="Strong Breeze",t.className="label label-success"):e>15&&e<=25?(t.innerText="Strong Gale",t.className="label label-warning"):e>25&&(t.innerText="Stormy",t.className="label label-danger"),t},render:function(e){var t=this;e.stadiums.map(function(e){var n=t.createWeatherInfoElement(e);t.stadiumList.appendChild(n)}),console.log(r),r.run(),this.addMarkersToMap()},addMarkersToMap:function(){t.publish("addMarkersToMap","")},addMarker:function(e,n,i,r){t.publish("addMarker",[e,n,i,r])}};a.init(),e.exports=a}()},function(t,n){!function(){var n=function(){this.skycons=new Skycons({color:"#ebebeb"}),this.list=["clear-day","clear-night","partly-cloudy-day","partly-cloudy-night","cloudy","rain","sleet","snow","wind","fog"]};n.prototype.run=function(){this.setIcons(),this.skycons.play()},n.prototype.setIcons=function(){for(i=this.list.length;i--;){var t=this.list[i],n=document.getElementsByClassName(t);for(e=n.length;e--;)this.skycons.set(n[e],t)}},t.exports=n}()}]);